{"ast":null,"code":"// ag-grid-react v27.1.0\n\"use strict\";\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ag_grid_community_1 = require(\"ag-grid-community\");\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar beansContext_1 = require(\"./beansContext\");\n\nvar gridBodyComp_1 = __importDefault(require(\"./gridBodyComp\"));\n\nvar reactComment_1 = __importDefault(require(\"./reactComment\"));\n\nvar tabGuardComp_1 = __importDefault(require(\"./tabGuardComp\"));\n\nvar utils_1 = require(\"./utils\");\n\nvar GridComp = function (_a) {\n  var context = _a.context;\n\n  var _b = react_1.useState(''),\n      rtlClass = _b[0],\n      setRtlClass = _b[1];\n\n  var _c = react_1.useState(''),\n      keyboardFocusClass = _c[0],\n      setKeyboardFocusClass = _c[1];\n\n  var _d = react_1.useState(''),\n      layoutClass = _d[0],\n      setLayoutClass = _d[1];\n\n  var _e = react_1.useState(null),\n      cursor = _e[0],\n      setCursor = _e[1];\n\n  var _f = react_1.useState(null),\n      userSelect = _f[0],\n      setUserSelect = _f[1];\n\n  var _g = react_1.useState(false),\n      initialised = _g[0],\n      setInitialised = _g[1];\n\n  var _h = react_1.useState(),\n      tabGuardReady = _h[0],\n      setTabGuardReady = _h[1];\n\n  var gridCtrlRef = react_1.useRef(null);\n  var eRootWrapperRef = react_1.useRef(null);\n  var tabGuardRef = react_1.useRef();\n  var eGridBodyParentRef = react_1.useRef(null);\n  var focusInnerElementRef = react_1.useRef(function () {\n    return undefined;\n  });\n  var onTabKeyDown = react_1.useCallback(function () {\n    return undefined;\n  }, []);\n  var beans = react_1.useMemo(function () {\n    return context.getBean('beans');\n  }, []);\n  reactComment_1.default(' AG Grid ', eRootWrapperRef); // create shared controller.\n\n  react_1.useEffect(function () {\n    var currentController = gridCtrlRef.current = context.createBean(new ag_grid_community_1.GridCtrl());\n    return function () {\n      context.destroyBean(currentController);\n      gridCtrlRef.current = null;\n    };\n  }, []); // initialise the UI\n\n  react_1.useEffect(function () {\n    var gridCtrl = gridCtrlRef.current;\n    focusInnerElementRef.current = gridCtrl.focusInnerElement.bind(gridCtrl);\n    var compProxy = {\n      destroyGridUi: function () {},\n      setRtlClass: setRtlClass,\n      addOrRemoveKeyboardFocusClass: function (addOrRemove) {\n        return setKeyboardFocusClass(addOrRemove ? ag_grid_community_1.FocusService.AG_KEYBOARD_FOCUS : '');\n      },\n      forceFocusOutOfContainer: function () {\n        tabGuardRef.current.forceFocusOutOfContainer();\n      },\n      updateLayoutClasses: setLayoutClass,\n      getFocusableContainers: function () {\n        var els = [];\n        var gridBodyCompEl = eRootWrapperRef.current.querySelector('.ag-root');\n        var sideBarEl = eRootWrapperRef.current.querySelector('.ag-side-bar');\n\n        if (gridBodyCompEl) {\n          els.push(gridBodyCompEl);\n        }\n\n        if (sideBarEl) {\n          els.push(sideBarEl);\n        }\n\n        return els;\n      },\n      setCursor: setCursor,\n      setUserSelect: setUserSelect\n    };\n    gridCtrl.setComp(compProxy, eRootWrapperRef.current, eRootWrapperRef.current);\n    setInitialised(true);\n  }, []); // initialise the extra components\n\n  react_1.useEffect(function () {\n    if (!tabGuardReady) {\n      return;\n    }\n\n    var gridCtrl = gridCtrlRef.current;\n    var beansToDestroy = [];\n    var agStackComponentsRegistry = beans.agStackComponentsRegistry;\n    var HeaderDropZonesClass = agStackComponentsRegistry.getComponentClass('AG-GRID-HEADER-DROP-ZONES');\n    var SideBarClass = agStackComponentsRegistry.getComponentClass('AG-SIDE-BAR');\n    var StatusBarClass = agStackComponentsRegistry.getComponentClass('AG-STATUS-BAR');\n    var WatermarkClass = agStackComponentsRegistry.getComponentClass('AG-WATERMARK');\n    var PaginationClass = agStackComponentsRegistry.getComponentClass('AG-PAGINATION');\n    var additionalEls = [];\n    var eRootWrapper = eRootWrapperRef.current;\n    var eGridBodyParent = eGridBodyParentRef.current;\n\n    if (gridCtrl.showDropZones() && HeaderDropZonesClass) {\n      var headerDropZonesComp = context.createBean(new HeaderDropZonesClass());\n      var eGui = headerDropZonesComp.getGui();\n      eRootWrapper.insertAdjacentElement('afterbegin', eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(headerDropZonesComp);\n    }\n\n    if (gridCtrl.showSideBar() && SideBarClass) {\n      var sideBarComp = context.createBean(new SideBarClass());\n      var eGui = sideBarComp.getGui();\n      var bottomTabGuard = eGridBodyParent.querySelector('.ag-tab-guard-bottom');\n\n      if (bottomTabGuard) {\n        bottomTabGuard.insertAdjacentElement('beforebegin', eGui);\n        additionalEls.push(eGui);\n      }\n\n      beansToDestroy.push(sideBarComp);\n    }\n\n    if (gridCtrl.showStatusBar() && StatusBarClass) {\n      var statusBarComp = context.createBean(new StatusBarClass());\n      var eGui = statusBarComp.getGui();\n      eRootWrapper.insertAdjacentElement('beforeend', eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(statusBarComp);\n    }\n\n    if (PaginationClass) {\n      var paginationComp = context.createBean(new PaginationClass());\n      var eGui = paginationComp.getGui();\n      eRootWrapper.insertAdjacentElement('beforeend', eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(paginationComp);\n    }\n\n    if (gridCtrl.showWatermark() && WatermarkClass) {\n      var watermarkComp = context.createBean(new WatermarkClass());\n      var eGui = watermarkComp.getGui();\n      eRootWrapper.insertAdjacentElement('beforeend', eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(watermarkComp);\n    }\n\n    return function () {\n      context.destroyBeans(beansToDestroy);\n      additionalEls.forEach(function (el) {\n        if (el.parentElement) {\n          el.parentElement.removeChild(el);\n        }\n      });\n    };\n  }, [tabGuardReady]);\n  var rootWrapperClasses = react_1.useMemo(function () {\n    return utils_1.classesList('ag-root-wrapper', rtlClass, keyboardFocusClass, layoutClass);\n  }, [rtlClass, keyboardFocusClass, layoutClass]);\n  var rootWrapperBodyClasses = react_1.useMemo(function () {\n    return utils_1.classesList('ag-root-wrapper-body', 'ag-focus-managed', layoutClass);\n  }, [layoutClass]);\n  var topStyle = react_1.useMemo(function () {\n    return {\n      userSelect: userSelect != null ? userSelect : '',\n      WebkitUserSelect: userSelect != null ? userSelect : '',\n      cursor: cursor != null ? cursor : ''\n    };\n  }, [userSelect, cursor]);\n  var eGridBodyParent = eGridBodyParentRef.current;\n  var setTabGuardCompRef = react_1.useCallback(function (ref) {\n    tabGuardRef.current = ref;\n    setTabGuardReady(true);\n  }, []);\n  return react_1.default.createElement(\"div\", {\n    ref: eRootWrapperRef,\n    className: rootWrapperClasses,\n    style: topStyle\n  }, react_1.default.createElement(\"div\", {\n    className: rootWrapperBodyClasses,\n    ref: eGridBodyParentRef\n  }, initialised && eGridBodyParent && react_1.default.createElement(beansContext_1.BeansContext.Provider, {\n    value: beans\n  }, react_1.default.createElement(tabGuardComp_1.default, {\n    ref: setTabGuardCompRef,\n    eFocusableElement: eGridBodyParent,\n    onTabKeyDown: onTabKeyDown,\n    gridCtrl: gridCtrlRef.current\n  }, // we wait for initialised before rending the children, so GridComp has created and registered with it's\n  // GridCtrl before we create the child GridBodyComp. Otherwise the GridBodyComp would initialise first,\n  // before we have set the the Layout CSS classes, causing the GridBodyComp to render rows to a grid that\n  // doesn't have it's height specified, which would result if all the rows getting rendered (and if many rows,\n  // hangs the UI)\n  react_1.default.createElement(gridBodyComp_1.default, null)))));\n};\n\nexports.default = react_1.memo(GridComp);","map":{"version":3,"sources":["/home/fraction/Music/Fraction-webapp/node_modules/ag-grid-react/lib/reactUi/gridComp.js"],"names":["__importStar","mod","__esModule","result","k","Object","hasOwnProperty","call","__importDefault","defineProperty","exports","value","ag_grid_community_1","require","react_1","beansContext_1","gridBodyComp_1","reactComment_1","tabGuardComp_1","utils_1","GridComp","_a","context","_b","useState","rtlClass","setRtlClass","_c","keyboardFocusClass","setKeyboardFocusClass","_d","layoutClass","setLayoutClass","_e","cursor","setCursor","_f","userSelect","setUserSelect","_g","initialised","setInitialised","_h","tabGuardReady","setTabGuardReady","gridCtrlRef","useRef","eRootWrapperRef","tabGuardRef","eGridBodyParentRef","focusInnerElementRef","undefined","onTabKeyDown","useCallback","beans","useMemo","getBean","default","useEffect","currentController","current","createBean","GridCtrl","destroyBean","gridCtrl","focusInnerElement","bind","compProxy","destroyGridUi","addOrRemoveKeyboardFocusClass","addOrRemove","FocusService","AG_KEYBOARD_FOCUS","forceFocusOutOfContainer","updateLayoutClasses","getFocusableContainers","els","gridBodyCompEl","querySelector","sideBarEl","push","setComp","beansToDestroy","agStackComponentsRegistry","HeaderDropZonesClass","getComponentClass","SideBarClass","StatusBarClass","WatermarkClass","PaginationClass","additionalEls","eRootWrapper","eGridBodyParent","showDropZones","headerDropZonesComp","eGui","getGui","insertAdjacentElement","showSideBar","sideBarComp","bottomTabGuard","showStatusBar","statusBarComp","paginationComp","showWatermark","watermarkComp","destroyBeans","forEach","el","parentElement","removeChild","rootWrapperClasses","classesList","rootWrapperBodyClasses","topStyle","WebkitUserSelect","setTabGuardCompRef","ref","createElement","className","style","BeansContext","Provider","eFocusableElement","memo"],"mappings":"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","sourcesContent":["// ag-grid-react v27.1.0\n\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ag_grid_community_1 = require(\"ag-grid-community\");\nvar react_1 = __importStar(require(\"react\"));\nvar beansContext_1 = require(\"./beansContext\");\nvar gridBodyComp_1 = __importDefault(require(\"./gridBodyComp\"));\nvar reactComment_1 = __importDefault(require(\"./reactComment\"));\nvar tabGuardComp_1 = __importDefault(require(\"./tabGuardComp\"));\nvar utils_1 = require(\"./utils\");\nvar GridComp = function (_a) {\n    var context = _a.context;\n    var _b = react_1.useState(''), rtlClass = _b[0], setRtlClass = _b[1];\n    var _c = react_1.useState(''), keyboardFocusClass = _c[0], setKeyboardFocusClass = _c[1];\n    var _d = react_1.useState(''), layoutClass = _d[0], setLayoutClass = _d[1];\n    var _e = react_1.useState(null), cursor = _e[0], setCursor = _e[1];\n    var _f = react_1.useState(null), userSelect = _f[0], setUserSelect = _f[1];\n    var _g = react_1.useState(false), initialised = _g[0], setInitialised = _g[1];\n    var _h = react_1.useState(), tabGuardReady = _h[0], setTabGuardReady = _h[1];\n    var gridCtrlRef = react_1.useRef(null);\n    var eRootWrapperRef = react_1.useRef(null);\n    var tabGuardRef = react_1.useRef();\n    var eGridBodyParentRef = react_1.useRef(null);\n    var focusInnerElementRef = react_1.useRef(function () { return undefined; });\n    var onTabKeyDown = react_1.useCallback(function () { return undefined; }, []);\n    var beans = react_1.useMemo(function () { return context.getBean('beans'); }, []);\n    reactComment_1.default(' AG Grid ', eRootWrapperRef);\n    // create shared controller.\n    react_1.useEffect(function () {\n        var currentController = gridCtrlRef.current = context.createBean(new ag_grid_community_1.GridCtrl());\n        return function () {\n            context.destroyBean(currentController);\n            gridCtrlRef.current = null;\n        };\n    }, []);\n    // initialise the UI\n    react_1.useEffect(function () {\n        var gridCtrl = gridCtrlRef.current;\n        focusInnerElementRef.current = gridCtrl.focusInnerElement.bind(gridCtrl);\n        var compProxy = {\n            destroyGridUi: function () { },\n            setRtlClass: setRtlClass,\n            addOrRemoveKeyboardFocusClass: function (addOrRemove) { return setKeyboardFocusClass(addOrRemove ? ag_grid_community_1.FocusService.AG_KEYBOARD_FOCUS : ''); },\n            forceFocusOutOfContainer: function () {\n                tabGuardRef.current.forceFocusOutOfContainer();\n            },\n            updateLayoutClasses: setLayoutClass,\n            getFocusableContainers: function () {\n                var els = [];\n                var gridBodyCompEl = eRootWrapperRef.current.querySelector('.ag-root');\n                var sideBarEl = eRootWrapperRef.current.querySelector('.ag-side-bar');\n                if (gridBodyCompEl) {\n                    els.push(gridBodyCompEl);\n                }\n                if (sideBarEl) {\n                    els.push(sideBarEl);\n                }\n                return els;\n            },\n            setCursor: setCursor,\n            setUserSelect: setUserSelect\n        };\n        gridCtrl.setComp(compProxy, eRootWrapperRef.current, eRootWrapperRef.current);\n        setInitialised(true);\n    }, []);\n    // initialise the extra components\n    react_1.useEffect(function () {\n        if (!tabGuardReady) {\n            return;\n        }\n        var gridCtrl = gridCtrlRef.current;\n        var beansToDestroy = [];\n        var agStackComponentsRegistry = beans.agStackComponentsRegistry;\n        var HeaderDropZonesClass = agStackComponentsRegistry.getComponentClass('AG-GRID-HEADER-DROP-ZONES');\n        var SideBarClass = agStackComponentsRegistry.getComponentClass('AG-SIDE-BAR');\n        var StatusBarClass = agStackComponentsRegistry.getComponentClass('AG-STATUS-BAR');\n        var WatermarkClass = agStackComponentsRegistry.getComponentClass('AG-WATERMARK');\n        var PaginationClass = agStackComponentsRegistry.getComponentClass('AG-PAGINATION');\n        var additionalEls = [];\n        var eRootWrapper = eRootWrapperRef.current;\n        var eGridBodyParent = eGridBodyParentRef.current;\n        if (gridCtrl.showDropZones() && HeaderDropZonesClass) {\n            var headerDropZonesComp = context.createBean(new HeaderDropZonesClass());\n            var eGui = headerDropZonesComp.getGui();\n            eRootWrapper.insertAdjacentElement('afterbegin', eGui);\n            additionalEls.push(eGui);\n            beansToDestroy.push(headerDropZonesComp);\n        }\n        if (gridCtrl.showSideBar() && SideBarClass) {\n            var sideBarComp = context.createBean(new SideBarClass());\n            var eGui = sideBarComp.getGui();\n            var bottomTabGuard = eGridBodyParent.querySelector('.ag-tab-guard-bottom');\n            if (bottomTabGuard) {\n                bottomTabGuard.insertAdjacentElement('beforebegin', eGui);\n                additionalEls.push(eGui);\n            }\n            beansToDestroy.push(sideBarComp);\n        }\n        if (gridCtrl.showStatusBar() && StatusBarClass) {\n            var statusBarComp = context.createBean(new StatusBarClass());\n            var eGui = statusBarComp.getGui();\n            eRootWrapper.insertAdjacentElement('beforeend', eGui);\n            additionalEls.push(eGui);\n            beansToDestroy.push(statusBarComp);\n        }\n        if (PaginationClass) {\n            var paginationComp = context.createBean(new PaginationClass());\n            var eGui = paginationComp.getGui();\n            eRootWrapper.insertAdjacentElement('beforeend', eGui);\n            additionalEls.push(eGui);\n            beansToDestroy.push(paginationComp);\n        }\n        if (gridCtrl.showWatermark() && WatermarkClass) {\n            var watermarkComp = context.createBean(new WatermarkClass());\n            var eGui = watermarkComp.getGui();\n            eRootWrapper.insertAdjacentElement('beforeend', eGui);\n            additionalEls.push(eGui);\n            beansToDestroy.push(watermarkComp);\n        }\n        return function () {\n            context.destroyBeans(beansToDestroy);\n            additionalEls.forEach(function (el) {\n                if (el.parentElement) {\n                    el.parentElement.removeChild(el);\n                }\n            });\n        };\n    }, [tabGuardReady]);\n    var rootWrapperClasses = react_1.useMemo(function () { return utils_1.classesList('ag-root-wrapper', rtlClass, keyboardFocusClass, layoutClass); }, [rtlClass, keyboardFocusClass, layoutClass]);\n    var rootWrapperBodyClasses = react_1.useMemo(function () { return utils_1.classesList('ag-root-wrapper-body', 'ag-focus-managed', layoutClass); }, [layoutClass]);\n    var topStyle = react_1.useMemo(function () { return ({\n        userSelect: userSelect != null ? userSelect : '',\n        WebkitUserSelect: userSelect != null ? userSelect : '',\n        cursor: cursor != null ? cursor : ''\n    }); }, [userSelect, cursor]);\n    var eGridBodyParent = eGridBodyParentRef.current;\n    var setTabGuardCompRef = react_1.useCallback(function (ref) {\n        tabGuardRef.current = ref;\n        setTabGuardReady(true);\n    }, []);\n    return (react_1.default.createElement(\"div\", { ref: eRootWrapperRef, className: rootWrapperClasses, style: topStyle },\n        react_1.default.createElement(\"div\", { className: rootWrapperBodyClasses, ref: eGridBodyParentRef }, initialised && eGridBodyParent &&\n            react_1.default.createElement(beansContext_1.BeansContext.Provider, { value: beans },\n                react_1.default.createElement(tabGuardComp_1.default, { ref: setTabGuardCompRef, eFocusableElement: eGridBodyParent, onTabKeyDown: onTabKeyDown, gridCtrl: gridCtrlRef.current }, // we wait for initialised before rending the children, so GridComp has created and registered with it's\n                // GridCtrl before we create the child GridBodyComp. Otherwise the GridBodyComp would initialise first,\n                // before we have set the the Layout CSS classes, causing the GridBodyComp to render rows to a grid that\n                // doesn't have it's height specified, which would result if all the rows getting rendered (and if many rows,\n                // hangs the UI)\n                react_1.default.createElement(gridBodyComp_1.default, null))))));\n};\nexports.default = react_1.memo(GridComp);\n"]},"metadata":{},"sourceType":"script"}